"# Section 3: Database Setup (Using Supabase MCP)\n\nWe'll use Supabase for a scalable, vector-enabled DB. Follow the \"database-api\" rule: Use Drizzle for schemas, Zod for validation, and transactions for ops.\n\n- **Steps**:\n  1. Use `mcp_supabase_create_project` to create a new Supabase project (ask for organization ID; confirm costs via `mcp_supabase_confirm_cost`).\n  2. Enable pgvector extension via `mcp_supabase_execute_sql` (e.g., `CREATE EXTENSION IF NOT EXISTS vector;`).\n  3. Define schema in `apps/server/src/db/schema.ts` (extend existing if any) using Drizzle:\n     - Table: `leads` (id: uuid, category: enum['influencer', 'journalist', 'publisher'], name: text, email: text, bio: text, source_url: text, embedding: vector(1536) â€“ for OpenAI embeddings).\n     - Table: `lead_metadata` (for graph edges in RAG, e.g., relationships like \"publisher owns journalist\").\n  4. Generate/migrate via `bun db:generate` and `bun db:migrate` (rules require test DB for integration tests).\n  5. Use `mcp_supabase_apply_migration` for any Supabase-specific migrations.\n  6. Seed initial data via `mcp_supabase_execute_sql` or Drizzle (e.g., sample leads).\n\n- **Performance/Security**: Add indexes on `category` and `embedding` (use pgvector's HNSW index). Follow rules: Parameterized queries, least privilege." 